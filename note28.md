## 프롬프트 엔지니어링
프롬프트 엔지니어링은 대규모 언어 모델이 사용자의 의도를 정확히 파악하고 최적의 결과물을 생성하도록 입력을 설계하고 최적화하는 기술이자 과학
이는 단순한 질문을 넘어, AI에게 문맥, 지침, 예시를 제공하여 원하는 결과물로 유도하는 과정
효과적인 프롬프트를 구성하기 위해서는 모델이 사용자의 의도를 정확히 파악하고 고품질의 결과를 생성할 수 있도록 명확한 구조를 갖추는 것이 중요

### 핵심 구성 요소
지시
    모델이 수행해야할 구체적인 작업이나 명령
    '요약하라', '분류하라', '번역하라' 와 같이 명확한 동사를 사용하여 모델이 무엇을 해야 하는지 정의하며, 지시는 모호함을 피하고 구체적일 수 록 좋음
문맥
    모델이 더 나은 응답을 생성하도록 유도하는 배경 정보나 외부 상황
    모델이 상황을 추측하게 하지 말고, '이 작업은 초보자를 위한 것이다' 라거나 '첨부된 재무 보고서를 바탕으로 분석하라' 와 같이 필요한 정보를 충분히 제공해야함
    이는 모델의 응답 범위를 제한하고 관련성을 높이는데 도움을 줌
입력 데이터
    모델이 처리해야할 실제 내용
    요약해야 할 텍스트, 번역할 문장, 답변해야할 질문 등이 이에 해당
    입력 데이터는 프롬프트 내에서 XML 태그나 특수 기호 등을 사용해 지시사항과 명확히 구분 해주는 것이 좋음
출력 지시자
    응답의 형식이나 유형을 지정하는 요소
    'JSON 형식으로 출력하라', '표로 만들어라', '불렛 포인트를 사용해라' 와 같이 원하는 결과물의 형태를 명시

### 성능향상을 위한 추가 요소
역할 및 정체성
    AI에게 '당신은 노련한 데이터 과학자입니다' 또는 '친절한 고객 서비스 상담원입니다' 와 같은 페르소나를 부여함
    이를 통해 모델의 어조, 관점, 스타일을 조정하고 특정 도메인의 전문적인 답변을 유도할 수 있음
    시스템 프롬프트(System Prompt)에 이 내용을 포함하는 것이 효과적
예시
    원하는 입력과 출력의 쌍을 제공하여 모델이 패턴을 학습하게 하는 기법
    예시는 모델에게 지시사항을 명확히 전달하고, 결과물의 스타일과 형식을 일관되게 유지하는데 매우 강력한 도구
    다양한 예시를 제공하면 모델이 의도치 않은 패턴을 학습하는 것을 방지할 수 있음
제약사항
    모델이 하지 말아야할 것(부정적 제약)이나 반드시 지켜야 할 규칙(긍정적 제약)을 절정
    예를 들어 '전문 용어를 쓰지 마라', '500단어 이내로 작성해라', '외부 라이브러리를 사용하지 마라' 등이 있음
구조화 태그
    프롬프트의 각 부분(지시, 문맥, 예시 등)을 명확히 구분하기 위해 XML 태그(<context>, <instrution>)나 마으다운 헤더(#)를 사용
    이는 모델이 긴 프롬프트를 정확하게 파싱하고 혼동을 줄이는데 도움을 줌

## 핵심프롬프트 기법

### 제로샷 vs 퓨샷 프롬프팅
제로샷 프롬프팅
    추가적인 예시 없이 모델에게 직접적인 지시나 질문만 제공하는 방식
        ex. 다음 텍스트를 요약해줘. 또는 기후 변화에 대한 에세이를 써 줘
퓨샷 및 멀티샷 프롬프팅
    모델이 패턴을 학습할 수 있도록 원하는 입력-출력 예시를 하나 이상 제공하는 기법
    예제는 모델의 정확성, 일관성, 스타일을 크게 향상시킴
    원칙:
        다양성: 엣지 케이스를 포함하여 다양한 예시를 제공하면 의도치 않은 패턴 학습을 방지할 수 있음
        일관된 형식: 예시 간의 구조와 형식을 통일해야 모델이 혼란을 겪지 않음

### 연쇄적 사고
복잡한 추론이 필요한 작업에서 모델에게 단계별로 생각하라고 지시하여 논리적 오류를 줄이는 기법
기본 연쇄적 사고
    프롬프트에 '단계별로 생각하라'는 문구를 추가한다
구조화된 연쇄적 사고
    모델이 추론과정과 최종답변을 분리하도록 유도
    예를 들어, thinking 태그 안에서 먼저 추론하고 answer 태그에 답을 내놓게 함
효과
    수학 문제, 논리적 분석, 복잡한 문서 작성 시 정확도와 일관성이 향상되며, 모델의 사고 과정을 통해 디버깅이 용이해짐

### 역할 부여
AI에게 특정 캐릭터나 직업적 역할을 부여하여 응답의 어조, 관점, 스타일을 조정하는 기법
방법
    시스템 프롬프트를 활용하여 '당신은 포춘 500 기업의 데이터 과학자이다'와 같이 설정을 부여
효과
    역할이 부여되면 모델은 해당 도메인의 전문적인 관점을 채택하여 더 깊이 있는 분석이나 적절한 톤의 답변을 제공

## 프롬프트의 구조화 및 제어

### XML 태그 활용
프롬프트 내의 지시사항, 문맥, 예시를 명확히 구분하기 위해 XML 태그를 사용
모델이 프롬프트의 각 부분을 명확하게 파싱하도록 도와 환각을 줄이고 정확도를 높임

### 응답 미리 채우기
AI의 응답 시작 부분을 사용자가 미리 작성해 두는 기법
형식 강제
    JSON 출력이 필요할 때, {로 응답을 시작하게 하여 서문을 건너뛰고 바로 JSON을 생성하게 유도
캐릭터 유지
    역할 이름과 같이 시작하여 역할극의 일관성을 유지
이 기법은 모델의 출력을 강력하게 제어하고 오류를 줄이는데 효과적

### 출력 형식 지정
원하는 결과물의 형식을 구체적으로 명시해야함
구체성
    표로 만들어라, 글머리 기호를 사용해라, JSON 형식으로 출력해라 와 같이 명확한 지시를 포함
부정적 제약보다는 긍정적 지시
    하지마라 보다는 하라 는 지시가 더 효과적

## 고급 전략 및 최적화

### 프롬프트 체이닝
복잡한 작업을 한 번에 처리하려 하지 말고, 여러개의 하위 작업으로 나누어 순차적으로 처리하는 기법
프로세스
    문서 분석 -> 요점 추출 -> 요약 작성 -> 변역 처럼 단계를 나누어 각 단계의 출력을 다음 단계의 입력으로 사용
장점
    각 단계에 모델이 온전히 집중할 수 있어 정확도가 높아지고, 오류 발생 시 원인을 파악하기 쉬움

### 긴 컨텍스트 처리
대향의 문서를 처리할 때는 데이터의 위치가 중요
팁
    긴 문서나 데이터와 같은 참조 자료를 프롬프트의 상단에 배치하고, 그 뒤에 지시사항과 질문을 배치하면 성능이 향상될 수 있음

### 모델 파라미터 조정
API를 사용할 경우, 파라미터 조정을 통해 결과의 다양성을 제어할 수 있음
온도
    낮을수록 결정론적이고 일관된 답변을 생성하며, 높을수록 창의적이고 다양한 답변을 생성
Top-P 및 Top-K
    다음 토큰 선택시 활률 분포를 잘라내는 방식으로 답변의 다양성을 조절함

### 자체 교정 및 검토
모델에게 최종 답변을 내놓기 전에 자신의 답을 검토하거나 계획을 세우도록 지시
예시
    퇴종 답변을 하기 전에 사용자의 요구사항을 모두 충족했는지 검토
    또는 코드를 작성한 후 테스트 케이스를 실행해 오류를 확인

## 실전 팁 요약
명확하고 구체적으로
    모호한 표현을 피하고, 정확한 동사와 수치를 사용
    ex. 짧게 써라 -> 500 단어 내외로 써라
맥락 제공
    모델이 추측하지 않도록 필요한 배경 정보, 용어 정의, 참조 문서를 충분히 제공
반복과 실험
    처음부터 완벽한 프롬프트는 존재하지 않음
    결과를 보며 단어를 바꾸거나 정보를 추가 혹은 삭제하며 최적화함
복잡한 작업 분해
    작업이 너무 복잡하면 단계별 지시로 나누거나 프롬프트 체이닝을 고려함
보안 및 안전
    편향되거나 유해한 콘텐츠 생성을 방지하기 위해 프롬프트 내에서 제약 조건을 명확히 설정